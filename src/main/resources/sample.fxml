<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.text.Font?>
<?import java.net.URL?>

<BorderPane prefHeight="800.0" prefWidth="1200.0" styleClass="root" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="mainpackage.Controller">

    <stylesheets>
        <URL value="@style.css" />
    </stylesheets>

    <!-- SIDEBAR -->
    <left>
        <VBox prefWidth="240.0" minWidth="200.0" styleClass="sidebar" spacing="0">
            <padding><Insets top="24" /></padding>

            <!-- LOGO -->
            <HBox alignment="CENTER_LEFT" spacing="12.0">
                <padding><Insets left="20.0" right="20.0" bottom="36.0" /></padding>
                <children>
                    <StackPane styleClass="logo-icon">
                        <padding><Insets bottom="8.0" left="8.0" right="8.0" top="8.0" /></padding>
                        <children>
                            <SVGPath content="M4 6h16M4 12h16M4 18h16" styleClass="logo-svg" scaleX="0.9" scaleY="0.9" />
                        </children>
                    </StackPane>
                    <Label text="AppVault" styleClass="logo-text" />
                </children>
            </HBox>

            <!-- MAIN NAV -->
            <VBox spacing="6.0">
                <padding><Insets left="16.0" right="16.0" bottom="36.0" /></padding>
                <Button fx:id="navDiscover" text="Discover" styleClass="nav-button, active" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath fx:id="discoverIcon" content="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" fill="TRANSPARENT" strokeWidth="1.8" styleClass="nav-icon"/></graphic>
                </Button>
                <Button fx:id="navLibrary" text="Library" styleClass="nav-button" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath content="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                </Button>
                <Button fx:id="navUpdates" styleClass="nav-button" maxWidth="Infinity" graphicTextGap="14" contentDisplay="LEFT">
                    <graphic><SVGPath content="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                    <text>Updates</text>
                </Button>
                <Button fx:id="navSettings" text="Settings" styleClass="nav-button" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath content="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                </Button>
            </VBox>

            <!-- CATEGORIES -->
            <Label text="CATEGORIES" styleClass="sidebar-section-label">
                <padding><Insets left="28.0" bottom="14.0" /></padding>
            </Label>
            <VBox spacing="2.0" VBox.vgrow="ALWAYS">
                <padding><Insets left="16.0" right="16.0" /></padding>
                <Button text="Developer Tools" styleClass="nav-button-sub" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath content="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                </Button>
                <Button text="Productivity" styleClass="nav-button-sub" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath content="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                </Button>
                <Button text="Graphics &amp; Design" styleClass="nav-button-sub" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath content="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                </Button>
                <Button text="Games" styleClass="nav-button-sub" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath content="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                </Button>
                <Button text="Music &amp; Audio" styleClass="nav-button-sub" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath content="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                </Button>
                <Button text="Video" styleClass="nav-button-sub" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath content="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                </Button>
                <Button text="Utilities" styleClass="nav-button-sub" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath content="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                </Button>
                <Button text="Security" styleClass="nav-button-sub" graphicTextGap="14" maxWidth="Infinity">
                    <graphic><SVGPath content="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" fill="TRANSPARENT" strokeWidth="1.5" styleClass="nav-icon"/></graphic>
                </Button>
            </VBox>

            <!-- USER PROFILE - Fixed at bottom -->
            <HBox alignment="CENTER_LEFT" spacing="14.0" styleClass="user-profile">
                <padding><Insets left="28.0" right="28.0" top="20.0" bottom="20.0" /></padding>
                <children>
                    <StackPane style="-fx-background-color: linear-gradient(to bottom right, #ec4899, #8b5cf6); -fx-background-radius: 50;">
                        <Circle fill="TRANSPARENT" radius="20" />
                        <Label text="JD" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 12px;" />
                    </StackPane>
                    <VBox spacing="2">
                        <Label text="John Doe" styleClass="username-label" />
                        <Label text="Pro Member" styleClass="pro-member-label" />
                    </VBox>
                </children>
            </HBox>
        </VBox>
    </left>

    <!-- MAIN CONTENT -->
    <center>
        <StackPane fx:id="contentArea">
            <!-- DISCOVER VIEW -->
            <VBox fx:id="discoverView" styleClass="content-area">
                <!-- TOP BAR -->
                <HBox alignment="CENTER_LEFT" prefHeight="72.0" spacing="0" styleClass="top-bar">
                    <padding><Insets left="48.0" right="48.0" top="16.0" bottom="16.0" /></padding>
                    <children>
                        <!-- SEARCH -->
                        <HBox alignment="CENTER_LEFT" styleClass="search-container" prefWidth="320" spacing="10">
                            <padding><Insets bottom="10.0" left="14.0" right="14.0" top="10.0" /></padding>
                            <children>
                                <SVGPath content="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" fill="TRANSPARENT" stroke="#71717a" strokeWidth="2" scaleX="0.8" scaleY="0.8"/>
                                <TextField fx:id="searchField" promptText="Search apps..." styleClass="search-field" HBox.hgrow="ALWAYS">
                                    <font><Font size="14.0" /></font>
                                </TextField>
                            </children>
                        </HBox>

                        <!-- Spacer -->
                        <Region HBox.hgrow="ALWAYS" />

                        <!-- FILTERS -->
                        <HBox spacing="8.0" alignment="CENTER">
                            <Button text="All" styleClass="filter-button, active" />
                            <Button text="Windows" styleClass="filter-button" graphicTextGap="6">
                                <graphic><SVGPath content="M0 3h11v11H0zm12 0h11v11H12zM0 15h11v8H0zm12 0h11v8H12z" fill="#71717a" scaleX="0.4" scaleY="0.4"/></graphic>
                            </Button>
                            <Button text="macOS" styleClass="filter-button" />
                            <Button text="Linux" styleClass="filter-button" />
                        </HBox>
                    </children>
                </HBox>

                <ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="content-scroll" vbarPolicy="NEVER" VBox.vgrow="ALWAYS">
                    <content>
                        <VBox spacing="32.0" styleClass="content-area">
                            <padding><Insets top="20.0" left="32.0" right="32.0" bottom="28.0" /></padding>
                            <children>

                                <!-- FEATURED SECTION -->
                                <VBox spacing="14.0">
                                    <Label text="Featured" styleClass="section-title" />
                                    <HBox fx:id="featuredContainer" spacing="20.0">
                                        <!-- Populated by Controller -->
                                    </HBox>
                                </VBox>

                                <!-- TRENDING SECTION -->
                                <VBox spacing="14.0">
                                    <HBox alignment="CENTER_LEFT" spacing="10">
                                        <Label text="Trending" styleClass="section-title" />
                                        <Label text="ðŸ”¥" style="-fx-font-size: 16px;" />
                                        <Region HBox.hgrow="ALWAYS" />
                                        <Button text="View All â†’" styleClass="view-all-btn" />
                                    </HBox>
                                    <GridPane fx:id="appsGrid" hgap="16.0" vgap="16.0">
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints vgrow="ALWAYS" />
                                        </rowConstraints>
                                    </GridPane>
                                </VBox>

                                <!-- ALL APPS SECTION -->
                                <VBox spacing="14.0">
                                    <HBox alignment="CENTER_LEFT" spacing="10">
                                        <Label text="All Apps" styleClass="section-title" />
                                        <Label text="ðŸ“¦" style="-fx-font-size: 16px;" />
                                        <Region HBox.hgrow="ALWAYS" />
                                        <Button text="View All â†’" styleClass="view-all-btn" />
                                    </HBox>
                                    <GridPane fx:id="allAppsGrid" hgap="16.0" vgap="16.0">
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints vgrow="ALWAYS" />
                                        </rowConstraints>
                                    </GridPane>
                                </VBox>

                            </children>
                        </VBox>
                    </content>
                </ScrollPane>
            </VBox>

            <!-- LIBRARY VIEW (initially hidden) -->
            <ScrollPane fx:id="libraryView" fitToWidth="true" hbarPolicy="NEVER" styleClass="content-scroll" visible="false">
                <content>
                    <VBox spacing="24" styleClass="content-area">
                        <padding><Insets top="32.0" left="32.0" right="32.0" bottom="32.0" /></padding>
                        <children>
                            <Label text="My Library" styleClass="section-title" />
                            <Label text="Apps you have installed" styleClass="section-subtitle" />
                            <Region prefHeight="8" />
                            <GridPane fx:id="libraryGrid" hgap="16.0" vgap="16.0">
                                <columnConstraints>
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                </columnConstraints>
                            </GridPane>
                        </children>
                    </VBox>
                </content>
            </ScrollPane>

            <!-- UPDATES VIEW (initially hidden) -->
            <ScrollPane fx:id="updatesView" fitToWidth="true" hbarPolicy="NEVER" styleClass="content-scroll" visible="false">
                <content>
                    <VBox spacing="24" styleClass="content-area">
                        <padding><Insets top="32.0" left="32.0" right="32.0" bottom="32.0" /></padding>
                        <children>
                            <HBox alignment="CENTER_LEFT" spacing="16">
                                <Label text="Updates Available" styleClass="section-title" />
                                <Label text="3" style="-fx-background-color: #ef4444; -fx-text-fill: white; -fx-background-radius: 12; -fx-padding: 4 12; -fx-font-size: 12px; -fx-font-weight: bold;" />
                            </HBox>
                            <Label text="The following apps have updates ready to install" styleClass="section-subtitle" />
                            <Region prefHeight="8" />
                            <GridPane fx:id="updatesGrid" hgap="16.0" vgap="16.0">
                                <columnConstraints>
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                    <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                                </columnConstraints>
                            </GridPane>
                        </children>
                    </VBox>
                </content>
            </ScrollPane>

            <!-- SETTINGS VIEW (initially hidden) -->
            <VBox fx:id="settingsView" styleClass="content-area" visible="false">
                <padding><Insets top="40.0" left="48.0" right="48.0" bottom="40.0" /></padding>
                <children>
                    <Label text="Settings" styleClass="section-title" style="-fx-font-size: 28px;" />
                    <Region prefHeight="32" />

                    <!-- Appearance Section -->
                    <VBox spacing="16" styleClass="settings-card">
                        <Label text="Appearance" styleClass="card-heading" />
                        <HBox alignment="CENTER_LEFT" spacing="20">
                            <VBox spacing="4" HBox.hgrow="ALWAYS">
                                <Label text="Dark Mode" styleClass="card-label" />
                                <Label text="Switch between dark and light theme" styleClass="card-sublabel" />
                            </VBox>
                            <Button fx:id="themeToggleBtn" text="Light Mode" style="-fx-background-color: #6366f1; -fx-text-fill: white; -fx-font-weight: 600; -fx-padding: 10 24; -fx-background-radius: 20; -fx-cursor: hand;" />
                        </HBox>
                    </VBox>
                </children>
            </VBox>

            <!-- APP DETAIL VIEW (initially hidden) -->
            <ScrollPane fx:id="appDetailView" fitToWidth="true" hbarPolicy="NEVER" styleClass="content-scroll" visible="false">
                <content>
                    <VBox fx:id="appDetailContent" spacing="24" styleClass="content-area">
                        <padding><Insets top="32.0" left="48.0" right="48.0" bottom="40.0" /></padding>
                        <!-- Content populated dynamically by Controller -->
                    </VBox>
                </content>
            </ScrollPane>
        </StackPane>
    </center>
</BorderPane>